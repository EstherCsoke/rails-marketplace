<br>
<div class="container">
  <div class="row align-items-center">
    <div class="col-sm-7 ">
      <h1><%= @listing.title%></h1>
      <div class="open-sans">
        <%= @listing.category.kind %> 
        <br>
        Posted:
        <%= @listing.created_at.strftime("%Y-%m-%d") %>
      </div>
      <% if @listing.picture.attached? %>
      <%= image_tag @listing.picture, class:"img-fluid max-with: 500px" %>
      <%end%>
      <ul>
      
      </ul>
    </div>
    <div class="col-sm-5 p-2 flex-column margin-top text-center">
      <h4>Price $<%= @listing.price%></h4>
      <br>
      <p><%= @listing.description%></p>

        <% if current_user.id != @listing.user_id %>
        <%= link_to "Message Seller", conversations_path(sender_id: current_user.id, receiver_id: @listing.user_id), method: :post, class: "btn btn-outline-light btn-lg dark-button" %>
        <br>
        <button class="btn btn-primary btn-outline-light btn-lg " data-stripe="quickbuy">Quick Buy</button>
        <%end%>
      <br>
<br>
         <%= link_to "Back" , listing_path, class: " "%>








    </div>
    <!-- /.col-sm-6 -->
  </div>
  <!-- /.row -->
</div>
<!-- /.container -->

<script src="https://js.stripe.com/v3/"></script>
<script>
  document
    .querySelector("[data-stripe='quickbuy']")
    .addEventListener("click", () => {
      const stripe = Stripe(
        "<%= Rails.application.credentials.dig(:stripe, :public_key) %>"
      );

      stripe.redirectToCheckout({
        sessionId: "<%= @session_id %>"
      });
    });
</script>

